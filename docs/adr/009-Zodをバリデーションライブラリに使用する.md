# ADR-009: Zodをバリデーションライブラリに使用する

## ステータス

- [x] 承認
- [ ] 保留
- [ ] 却下

## 論点

APIリクエスト/レスポンスや外部データのバリデーションをどのように実装するか。

## 決定事項

Zodを使用してランタイムバリデーションとスキーマ定義を行う。

## 決定理由

- **型安全性**: Zodスキーマから型を自動推論でき、TypeScriptの型と完全に同期
- **ランタイムバリデーション**: コンパイル時の型チェックではカバーできない外部データの検証が可能
- **エラーメッセージ**: 詳細でカスタマイズ可能なエラーメッセージを生成
- **チェーン構文**: 直感的なAPIで複雑なスキーマを簡潔に記述可能
- **Honoと統合**: `@hono/zod-validator`により、リクエストバリデーションが簡単
- **DX**: Zodスキーマが型定義とバリデーションロジックを一箇所に集約し、保守性が向上

## 代替案

### Yup

- 人気があるが、TypeScript統合がZodより弱い
- スキーマから型を推論する機能が限定的

### Joi

- 成熟しているが、TypeScriptファーストではない
- ブラウザバンドルサイズが大きい

### class-validator + class-transformer

- デコレータベースで記述は簡潔だが、実験的機能（デコレータ）に依存
- 関数型アプローチのZodと比較してテストが複雑
