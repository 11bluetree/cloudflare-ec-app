# ADR-006: pnpmワークスペースでモノレポを構成する

## ステータス

- [x] 承認
- [ ] 保留
- [ ] 却下

## 論点

フロントエンド、バックエンド、共有ライブラリをどのように管理するか。

## 決定事項

pnpmワークスペースを使用してモノレポを構築する。

## 決定理由

- **ディスク効率**: コンテンツアドレッサブルストレージにより、重複パッケージをハードリンクで共有し、ディスク容量を節約
- **高速インストール**: npmやyarnと比較して最大2倍高速なインストール
- **厳格な依存関係管理**: Phantom dependenciesを防ぎ、明示的に宣言された依存関係のみ使用可能
- **ワークスペースサポート**: モノレポに必要な機能が標準でサポートされている
- **フィルタリング**: `--filter`オプションで特定のワークスペースに対してコマンド実行が可能
- **軽量**: Node.jsのみで動作し、追加のツールが不要

## 代替案

### npm workspaces

- 標準ツールだが、pnpmと比較してインストール速度が遅い
- ディスク使用量が多い

### yarn workspaces

- 高機能だが、pnpmと比較してパフォーマンスが劣る
- Phantom dependencies問題がある

### Turborepo

- ビルドキャッシュ等の高度な機能があるが、本プロジェクトの規模には不要
- 追加の学習コストとセットアップが必要
